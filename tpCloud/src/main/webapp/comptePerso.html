<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Mon compte</title>
	<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <nav class="navbar navbar-default navbar-fixed-top">
			<div class="container-fluid">
					<ul class="nav navbar-nav">
						<li>
							<a href=#><img src=logo.png></a>
						</li>
						<li>
							<a href="/"> <span class="glyphicon glyphicon-home"></span> Accueil </a>
					</ul>
					<form class="navbar-form navbar-right inline-form">
						<button class="btn btn-primary"><a href="/boumsong/Deconnexion" style="color:white;" title="déconnexion">Déconnexion</a></button>
					</form>
			</div>
	    </nav>

        <script src="https://unpkg.com/mithril/mithril.js"></script>
        <script>	

        var root = document.body
        
        var MesPetition = {
            list: [],
            loadList: function() {
                return m.request({
                    method: "GET",
                    url: "https://projetcloudm1.appspot.com/_ah/api/myApi/v1/entity/titi"
                })
                .then(function(result) {
                    Score.list = result.items
                    console.log("got:",result.items)
                    m.redraw(true) // force
                })
            },
            current: {},
            save: function() {
                console.log("saving...",Score.current)
                return m.request({
                    method: "POST",
                    url: "https://projetcloudm1.appspot.com/_ah/api/myApi/v1/addScore/"+Score.current.score+"/"+Score.current.name
                })
                .then(function(result) {
                    console.log("got:",result)
                    Score.loadList()
                })
            }
        }
        
        var Affiche ={
        		 view: function() {
     	 	    	return m("main", [
     	 	        	m("h1",  "Tiny Pet, site de petition en ligne"),
     	 	            m("a", {href:"index.html"},class="glyphicon glyphicon-home",  "Accueil"),
     	 	            //class="glyphicon glyphicon-home"
     	 	            m("li",[m("a", {href:"index.html"}, "Liste des fonctionnalités disponibles"),]),
     	 	            m("li",[m("a", {href:"creerPetition.html"}, "Créer une pétittion"),]),
     	 	            m("li",[m("a", {href:"connexion.html"}, "Se connecter"),])
     			        //m("h1", {class: "title"}, "Trending petitions"),
     	 	            m("div", {id: "box"}, m(PetitionView)),
     	 	        ])
     	 	    }
        }

    m.mount(root, Affiche)	

	</script>
</div>
</body>
</html>