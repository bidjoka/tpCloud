<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="google-signin-client_id" content="645573598547-h18kns51ko3p9ja3ni909jbh79p4gfv4.apps.googleusercontent.com">
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
<title>Créer votre pétition</title>
<style type="text/css">
body { padding-top: 70px; padding-bottom:70px;}
</style>
</head>
<body>

<script src="https://unpkg.com/mithril/mithril.js"></script>
<script>

var root = document.body

var petition = {
	    current: {},
	    save: function() {
	    	console.log("saving...",petition.current)
	        return m.request({
	            method: "POST",
	            url: "https://my-cloud-project-232813.appspot.com/_ah/api/myApi/v1/petition/"+petition.current.nom+"/"+petition.current.message+"/"+petition.current.auteur
	        })
	        .then(function(result) {
	        	console.log("got:",result)
	        	petition.loadList()
	        })
	    }
    }
        


m.render(root, [
    m("header",{style: "color: blue"},[
        m("nav", {class: "navbar navbar-default navbar-fixed-top" },
            m("div", {class: "container-fluid" },
                m('ul', {class: "nav navbar-nav" },
                    m("li",
                        m("a", {class: "navbar-brand", href: "accueil.html" , style: "color: blue"},
                            m("strong", {class: "glyphicon glyphicon-globe", style: "color: blue"}),
                            "TinyPet")
                        ),
                        m("li",
                                m("a", {href: "/connexion.html"},
                                    "Connexion")
                                ),
                    m("li",
                        m("a", {href: "/creerPetition.html"},
                            m("span", {class: "glyphicon glyphicon-pencil", style: "color: blue"}),
                            "Créer une pétition")
                        ),
                        m("li",
                                m("a", {href: "test2.html"},
                                    m("span", {class: "glyphicon glyphicon-th-list", style: "color: blue"}),
                                    "Liste des pétitions")
                                ),
                    m("li",
                        m("a", {href: "MesPetitions.html"},
                            m("span", {class: "glyphicon glyphicon-th-list", style: "color: blue"}),
                            "Mes pétitions")
                        ),
                   /* m("li",
                        m("a", {href: "/topPetition.html"},
                            m("span", {class: "glyphicon glyphicon-thumbs-up", style: "color: blue"}),
                            "Top 100 des pétitions")
                        ),*/
                    
                    )
                )
            ),
        m("div",{class:"view intro-2"},
            m("div",{class:"full-bg-img"},
                m("div",{class:"mask rgba-black-light flex-center"},
                    m("div",{class:"container text-center white-text"},
                        m("div", {class:"white-text text-center wow fadeInUp"},
                            m("h2",{style: "color: blue"},"Seul on va plus vite mais ensemble on va plus loin")
                        )
                    )
                )
            )
        )
        ]),
         m("hr", {style: "color: blue"} ),
         m("main", [
            m("form", {class: "col-lg-4 col-lg-offset-4",
                onsubmit: function(e) {
	                    e.preventDefault()
	                    petition.save()
                    }
                },
                m("legend", "Votre pétition"),
                    m("label", "Titre de la pétition"),
                    m("input", { class: "form-control",
	                    oninput: function (e) {petition.current.nom=e.target.value},
	                                value: petition.current.nom
                        }),
                    m("label", "Auteur"),
                    m("input", { class: "form-control",
	                    oninput: function (e) {petition.current.auteur=e.target.value},
	                                value: petition.current.auteur
	                    }),
                    m("label", "Votre message"),
                    m("textarea", { class: "form-control",
	                    oninput: function (e) {petition.current.message=e.target.value},
	                                value: petition.current.message
                    }),
                    m("br"),
                m("button", {type: "submit", class: "pull-right btn btn-primary"}, "Poster")
            )
	    ])
])

</script>
</body>
</html>